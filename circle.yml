machine:
  environment:
    # We need to set this variable to let python see the package installed through apt-get
    # PYTHONPATH: /usr/lib/python2.7/dist-packages
dependencies:
  cache_directories:
    - "~/scikit_learn_data"
    - "~/scikit-learn.github.io"
    - "~/download"
  # Various dependencies
  override:
    - ./continuous_integration/circle/build_doc.sh
test:
  # Grep error on the documentation
  override:
    - cat ~/log.txt && if grep -q "Traceback (most recent call last):" ~/log.txt; then false; else true; fi
#deployment:
#  push:
#    branch: master
#    commands:
#      - bash continuous_integration/push_doc.sh
general:
  # Open the doc to the API
  artifacts:
    - "doc/_build/html"
    - "~/log.txt"
  # Restrict the build to the branch master only
#  branches:
#    only:
#       - master
